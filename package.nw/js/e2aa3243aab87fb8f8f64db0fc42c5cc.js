;!function(require, directRequire){;'use strict';const _=require('lodash'),{REHYDRATE}=require('redux-persist/lib/constants'),actions=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),weappConfig=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),musicstatusConfig=require('./5dc59f418d85e854c1a12d402d29e2d7.js'),networkResponseCache=require('./5d0f2b7b8c329790946b9b597749ad67.js'),locales=require('./common/locales/index.js'),rotateHelper=require('./a3d662b5798bbb27bf21be3e3587a588.js'),{DEFAULT_ORIENTATION,getOriginalPageOrientationObject,shouldSimulatorRotate}=rotateHelper;let webviewCounter=0;const getInitialState=()=>({devtoolsDebugger:{paused:!1},subPackageLoaded:{},gameSubPackageLoaded:{},compileCommand:{ts:Date.now()},scene:1001,restartTimes:0,beginTime:Date.now(),currentWebviewID:-1,webviewInfos:{},tabbar:{show:!0,animation:!1},widget:{errmsg:'',ready:!1,tapCallback:{}},vibrate:{ts:Date.now(),type:'none'},game:{ready:!1,webview:void 0},backgroundShow:!1,toastInfo:{show:!1,icon:'success',title:'',image:'',mask:!1,showOnWebviewID:-1},modalInfo:{show:!1,title:'',content:'',showCancel:!0,cancelText:locales.config.CANCEL,confirmText:locales.config.CONFIRM,cancelColor:'#000000',confirmColor:'#3CC51F',callbackID:-1,showOnWebviewID:-1},modalInfos:[],actionsheetInfo:{show:!1,itemList:[],cancelColor:'#000000',cancelText:locales.config.CANCEL,itemColor:'#000000',callbackID:-1,showOnWebviewID:-1,alertIndex:-1},pickerInfo:{show:!1,mode:'none',callbackID:-1,webviewID:-1,api:''},groupInfo:{show:!1,list:[]},assdkCallbackInfo:{api:'',callbackID:-1,res:{}},assdkOnEventInfo:{event:'',data:{}},jssdkCallbackInfo:{callbackID:null,res:{}},interfaceCallbackInfo:{callbackID:null,method:'',data:{}},previewImage:{show:!1,urls:[],current:''},cardInfo:{show:'none',args:{},callbackID:-1,cardInfo:[],errData:[]},shareInfo:{show:!1,imageUrl:'',title:'',desc:'',api:'',group:void 0,callbackID:-1},rightBtnActionSheet:{show:!1},appConfig:{},debuggeeMap:{},appLaunched:!1,confirm:{show:!1,title:'',content:'',showCancel:!0,confirmColor:'#3CC51F',cancelColor:'#000000',contentColor:'#888',confirmText:locales.config.CONFIRM,cancelText:locales.config.CANCEL,subList:[]},setting:{show:!1,api:'',scopeList:[],callbackID:-1},appLaunchInfo:{scene:-1,path:'',query:{}},appRoute:{openType:'none',status:'none'},authorize:{show:!1,options:{},scopeList:[],imageUrl:'',appName:''},payment:{show:!1,uuid:'',qrcode:''},location:{show:!1},accelerometer:!1,compass:!1,music:{type:'backgroundAudio',src:'',title:'',singer:'',epname:'',webUrl:'',startTime:0,coverImgUrl:'',status:musicstatusConfig.MUSIC_STATE_INIT},wxmlInspected:!1,addPhoneContact:{show:!1,callbackID:-1,api:'',contactData:{}},chooseAddress:{show:!1,callbackID:-1,api:''},chooseInvoiceTitle:{show:!1,callbackID:-1,api:''},decryptedInfo:{},captureScreen:{callbackID:-1,webviewID:-1},orientation:{value:DEFAULT_ORIENTATION,callbackID:-1},statusbar:{color:'white'},keyboard:{show:!1,defaultValue:''},menu:{style:'dark'},debugInfo:null,simulateUpdate:!1,coverViewTree:{0:{sons:[],id:'0'}}}),getNavigationBar=(a,b='')=>{let c={};b&&(c=getPageConfig(a,b));const d='black'===c.navigationBarTextStyle?'black':'white';return{home:!1,title:c.navigationBarTitleText||'',titleStyle:d,showLoading:!1,showLeftBtn:!1,showRightBtn:!0,showRecordWording:!1,rightBtnIconPath:'',rightBtnText:'',backgroundColor:c.navigationBarBackgroundColor||weappConfig.DEFAULT_NAVIGATIONBAR_BGCOLOR,frontColor:'white'==d?weappConfig.DEFAULT_NAVIGATIONBAR_WHITE_TEXTCOLOR:weappConfig.DEFAULT_NAVIGATIONBAR_BLACK_TEXTCOLOR,alpha:c.hasOwnProperty('navigationBarBackgroundAlpha')?c.navigationBarBackgroundAlpha:1,transition:'none',disableScroll:c.disableScroll,navigationStyle:c.navigationStyle||'default'}},getDeviceOrientation=(a)=>a.orientation.value,getTabbarIndex=(a,b='')=>{let c=-1;try{if(b){c=a.tabBar.list.findIndex((a)=>{return!!a.pagePath&&a.pagePath===b+'.html'})}}catch(a){c=-1}return c},newWebviewInfo=(a,b='')=>{const{appConfig:c}=a,d=getTabbarIndex(c,b),e=getDeviceOrientation(a),f=getOriginalPageOrientationObject(c,b,e);return{id:webviewCounter++,parent:-1,child:-1,pathName:b,query:{},backgroundColor:'#ffffff',shareDataURI:'',tabbarIndex:d,navigationBar:getNavigationBar(c,b),showNavigationBar:!0,showStatusBar:!0,shareBtnState:{show:!1,isDynamic:!1,withShareTicket:!1},pageOrientation:f,ready:!1,zIndex:-1,exitType:'none'}},getWebviewInfo=(a,b='')=>{if(a.standbyWebview){const c=getTabbarIndex(a.appConfig,b),d=getOriginalPageOrientationObject(a.appConfig,b,getDeviceOrientation(a)),e=Object.assign({},a.standbyWebview,{navigationBar:getNavigationBar(a.appConfig,b),tabbarIndex:c,pathName:b,pageOrientation:d});return e}return newWebviewInfo(a,b)},checkWebviewInfos=(a)=>{const b={};for(const c in a){const d=a[c];if(-1===d.parent){b[c]=d;for(let c=a[d.child];c&&!b[c.id];)b[c.id]=c,c=a[c.child]}}return b},getMaxZIndex=(a)=>{let b=0;for(const c in a){const d=a[c];b<d.zIndex&&(b=d.zIndex)}return b},checkCouldRoute=(a)=>{const b=a.currentWebviewID,c=a.webviewInfos[b];return c.pageNotFound||'prepare'!==a.appRoute.status},getPageConfig=(a,b)=>{const c=b+'.html',d=a.global&&a.global.window||{};let e=a.page&&a.page[c]&&a.page[c].window||{};return e=Object.assign({},d,e),e};function simulator(a=getInitialState(),b={}){switch(b.type){case actions.SIMULATOR_SET_ADDPHONECONTACT:return Object.assign({},a,{addPhoneContact:Object.assign({},b.data,{contactData:Object.assign({},b.data.contactData)})});case actions.SIMULATOR_SET_CHOOSEADDRESS:return Object.assign({},a,{chooseAddress:Object.assign({},b.data)});case actions.SIMULATOR_SET_CHOOSEINVOICETITLE:return Object.assign({},a,{chooseInvoiceTitle:Object.assign({},b.data)});case actions.TOOLBAR_SELECT_DEVICE:return Object.assign({},a,{standbyWebview:void 0});case actions.TOOLBAR_SET_DEVICE_ROTATED:{const c=b.data,d=c?'landscape':'portrait',{currentWebviewID:e,webviewInfos:f}=a,g=f[e],h=Object.assign({},a,{orientation:Object.assign({},a.orientation,{value:d})});return g&&(g.pageOrientation=Object.assign({},g.pageOrientation,{lastPageOrientation:d}),h.webviewInfos[e]=g),h}case actions.SIMULATOR_LOAD_SUBPACKAGE:return a.subPackageLoaded[b.data.root]&&a.subPackageLoaded[b.data.root].loaded?a:Object.assign({},a,{subPackageLoaded:Object.assign({},a.subPackageLoaded,{[b.data.root]:{taskId:b.data.taskId,loaded:b.data.loaded}})});case actions.SIMULATOR_LOAD_GAME_SUBPACKAGE:return a.gameSubPackageLoaded[b.data.root]&&a.gameSubPackageLoaded[b.data.root].loaded?a:Object.assign({},a,{gameSubPackageLoaded:Object.assign({},a.gameSubPackageLoaded,{[b.data.root]:{taskId:b.data.taskId,loaded:b.data.loaded}})});case actions.SIMULATOR_LAUNCH:{networkResponseCache.clean();const c=b.appConfig,d=b.data.initialDeviceOrientation,e=getInitialState(),f=Object.assign({},e,{tabbar:Object.assign({},_.cloneDeep(c.tabBar),{show:!0,animation:!1}),appConfig:c,restartTimes:a.restartTimes+1,scene:b.data.appLaunchInfo.scene,orientation:Object.assign({},e.orientation,{value:d}),appRoute:{openType:'appLaunch',status:'prepare'},standbyWebview:void 0,simulateUpdate:a.simulateUpdate,appLaunchInfo:b.data.appLaunchInfo}),g=newWebviewInfo(f,b.data.appLaunchInfo.path),h=g.id;return g.navigationBar.home=-1===g.tabbarIndex&&!!b.data.home,g.pageNotFound=b.data.pageNotFound,g.isEntryPath=b.data.isEntryPath,Object.assign(g,b.data),g.zIndex=1,Object.assign({},f,{compileCommand:a.compileCommand,currentWebviewID:h,webviewInfos:{[h]:g}})}case actions.SIMULATOR_SET_WEBVIEW_READY:{const c=b.webviewID,d=a.webviewInfos[c];return Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[c]:Object.assign({},d,{ready:b.ready})}),appRoute:Object.assign({},a.appRoute,{status:'ready'})})}case actions.SIMULATOR_SET_APP_LAUNCHED:return Object.assign({},a,{appLaunched:b.flag});case actions.SIMULATOR_SET_SIMULATE_UPDATE:return Object.assign({},a,{simulateUpdate:b.simulateUpdate});case actions.SIMULATOR_COMPILE:return Object.assign({},a,{appLaunched:!1,compileCommand:Object.assign({},b.data,{ts:Date.now()})});case actions.SIMULATOR_NAVIGATE:{if(!checkCouldRoute(a))return a;const c=a.currentWebviewID,d=a.webviewInfos[c],e=getWebviewInfo(a,b.data.pathName),f=e.id;Object.assign(e,b.data),d.pageNotFound||(d.child=f,e.parent=c),e.navigationBar.showLeftBtn=-1!==e.parent;const g=checkWebviewInfos(a.webviewInfos);return e.zIndex=getMaxZIndex(g)+1,Object.assign({},a,{currentWebviewID:f,webviewInfos:Object.assign({},g,{[f]:e}),appRoute:{openType:'navigateTo',status:'prepare'},standbyWebview:newWebviewInfo(a,'')})}case actions.SIMULATOR_REDIRECT:{if(!checkCouldRoute(a))return a;const c=a.currentWebviewID,d=a.webviewInfos[c],e=getWebviewInfo(a,b.data.pathName),f=e.id;Object.assign(e,b.data),e.parent=d.parent,a.webviewInfos[e.parent]&&(a.webviewInfos[e.parent].child=f),e.navigationBar.showLeftBtn=-1!==e.parent,e.zIndex=d.zIndex;const g=checkWebviewInfos(a.webviewInfos);return Object.assign({},a,{currentWebviewID:f,webviewInfos:Object.assign({},g,{[c]:Object.assign({},d,{exitType:'redirect'}),[f]:e}),appRoute:{openType:'redirectTo',status:'prepare'},standbyWebview:newWebviewInfo(a,'')})}case actions.SIMULATOR_OPEN_TABBAR:{if(!checkCouldRoute(a))return a;const c=a.webviewInfos;let d;const e={};for(const a in c){const f=c[a];-1!==f.tabbarIndex&&(e[a]=f,f.pathName===b.data.pathName&&f.tabbarIndex===b.data.tabbarIndex&&(d=f))}let f=a.standbyWebview;return d?d.zIndex=getMaxZIndex(e)+1:(d=getWebviewInfo(a,b.data.pathName),d.zIndex=getMaxZIndex(e)+1,Object.assign(d,b.data),e[d.id]=d,f=newWebviewInfo(a,'')),Object.assign({},a,{currentWebviewID:d.id,webviewInfos:e,appRoute:{openType:'switchTab',status:d.ready?'ready':'prepare'},standbyWebview:f})}case actions.SIMULATOR_NAVIGATE_BACK:{if(a.anyHtmlWebviewInfo)return Object.assign({},a,{anyHtmlWebviewInfo:null});const c=Object.assign({},a.webviewInfos);let d=a.currentWebviewID,e=c[d],f=b.delta;for(;0<f&&e&&-1!==e.parent;)c[d]=Object.assign({},e,{exitType:'back'}),d=e.parent,e=c[d],e.child=-1,f--;return Object.assign({},a,{currentWebviewID:d,webviewInfos:c,appRoute:{openType:'navigateBack',status:'ready'}})}case actions.SIMULATOR_CLEAN_EXITING_WEBVIEW:{const b={};for(const c in a.webviewInfos){const d=a.webviewInfos[c];'none'===d.exitType&&(b[c]=d)}return Object.assign({},a,{webviewInfos:b})}case actions.SIMULATOR_SHOW_SPECIFIC_WEBVIEW:return Object.assign({},a,{currentWebviewID:parseInt(b.webviewID,10)});case actions.SIMULATOR_CLEAN_ALL_WEBVIEW:return Object.assign({},a,{webviewInfos:{}});case actions.SIMULATOR_RELAUNCH:{const c=getWebviewInfo(a,b.data.pathName),d=c.id;return Object.assign(c,b.data),c.zIndex=1,Object.assign({},a,{currentWebviewID:d,webviewInfos:{[d]:c},appRoute:{openType:'reLaunch',status:'prepare'},standbyWebview:newWebviewInfo(a,'')})}case actions.SIMULATOR_RELAUNCH_TO_INDEX:{const b=a.appConfig.pages&&a.appConfig.pages[0]||'',c=getWebviewInfo(a,b),d=c.id;return Object.assign({},a,{currentWebviewID:d,webviewInfos:{[d]:c},appRoute:{openType:'reLaunch',status:'prepare'},standbyWebview:newWebviewInfo(a,'')})}case actions.SIMULATOR_SET_NAVIGATION_BAR:{const c=a.webviewInfos[a.currentWebviewID];if(!c||!c.navigationBar)return a;return c.navigationBar=Object.assign({},c.navigationBar,b.data),Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[a.currentWebviewID]:c})})}case actions.SIMULATOR_SET_TOAST:return Object.assign({},a,{toastInfo:Object.assign({},b.data,{showOnWebviewID:b.data.show?a.currentWebviewID:-1})});case actions.SIMULATOR_SET_MODAL:return Object.assign({},a,{modalInfos:[...a.modalInfos,Object.assign({},b.data,{showOnWebviewID:b.data.show?a.currentWebviewID:-1})]});case actions.SIMULATOR_UNSET_MODAL:{const c=[...a.modalInfos],d=c.findIndex((a)=>a.callbackID===b.data.callbackID);return 0<=d&&c.splice(d,1),Object.assign({},a,{modalInfos:c})}case actions.SIMULATOR_SET_ACTIONSHEET:return Object.assign({},a,{actionsheetInfo:Object.assign({},b.data,{showOnWebviewID:b.data.show?a.currentWebviewID:-1})});case actions.SIMULATOR_SET_PICKER:return Object.assign({},a,{pickerInfo:Object.assign({},b.data)});case actions.SIMULATOR_UPDATE_MULTI_PICKER:{const c=b.data.column||0,d=a.pickerInfo.array||[];let e=[];return'[object array]'===Object.prototype.toString.call(a.pickerInfo.current).toLowerCase()&&(e=a.pickerInfo.current),d[c]=b.data.array,e[c]=b.data.current,Object.assign({},a,{pickerInfo:Object.assign({},a.pickerInfo,{array:[].concat(d),current:e})})}case actions.SIMULATOR_SET_SHARE_BTN:{const c=a.webviewInfos[a.currentWebviewID]||{};return c.shareBtnState=Object.assign({},c.shareBtnState,b.data),Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[a.currentWebviewID]:c})})}case actions.SIMULATOR_UPDATE_SHARE_GROUP_INFO:return Object.assign({},a,{groupInfo:Object.assign({},a.groupInfo,b.data)});case actions.ASSDK_CALLBACK:return Object.assign({},a,{assdkCallbackInfo:{callbackID:b.callbackID,res:b.res,api:b.api}});case actions.JSSDK_CALLBACK:return Object.assign({},a,{jssdkCallbackInfo:{callbackID:b.callbackID,webviewID:b.webviewID,res:b.res}});case actions.SIMULATOR_SET_PREVIEW_IMAGE:return Object.assign({},a,{previewImage:Object.assign({},a.previewImage,b.data)});case actions.SIMULATOR_SET_CARD_VIEW:return Object.assign({},a,{cardInfo:Object.assign({},b.data)});case actions.SIMULATOR_SHARE_APP_MSG:{const c=a.currentWebviewID,d=a.webviewInfos[c],e=d.shareBtnState;return e.withShareTicket&&b.shareInfo.length?Object.assign({},a,{shareInfo:Object.assign({show:!1,group:null},b.data),groupInfo:{list:b.shareInfo,show:!0}}):Object.assign({},a,{shareInfo:Object.assign({show:!0,group:null},b.data)})}case actions.SIMULATOR_SET_SHARE:return Object.assign({},a,{shareInfo:Object.assign({},a.shareInfo,b.data)});case actions.SIMULATOR_SET_GROUP_INFO:return Object.assign({},a,{groupInfo:Object.assign({},a.groupInfo,b.data)});case actions.SIMULATOR_SET_APP_CONFIG:return Object.assign({},a,{appConfig:b.data});case actions.SIMULATOR_SET_DEBUGGEE:{const c=Object.assign({},a.debuggeeMap);return b.flag?c[b.webviewID]=b.debuggee:delete c[b.webviewID],Object.assign({},a,{debuggeeMap:c})}case actions.SIMULATOR_SET_CONFIRM:{const c=b.data;return Object.assign({},a,{confirm:Object.assign({},a.confirm,{show:c.show,title:c.title,showCancel:!1!==c.showCancel,content:c.content||'',confirmText:c.confirmText||locales.config.CONFIRM,cancelText:c.cancelText||locales.config.CANCEL,callback:c.callback,subList:c.subList||[]})})}case actions.SIMULATOR_SET_SETTING:return Object.assign({},a,{setting:Object.assign({},a.setting,b.data)});case actions.SIMULATOR_SET_APP_ROUTE:return Object.assign({},a,{appRoute:Object.assign({},a.appRoute,b.data)});case actions.USER_LOGIN_SUCCESS:return getInitialState();case actions.SIMULATOR_SET_AUTHORIZE_CONFIRM:return Object.assign({},a,{authorize:Object.assign({},a.authorize,b.data)});case actions.SIMULATOR_SET_SHARE_DATAURI:{const c=b.data.webviewID,d=a.webviewInfos[c];if(!d)return a;return d.shareDataURI=b.data.dataURI,Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[c]:d})})}case actions.SIMULATOR_SET_RIGHTBTN_ACTIONSHEET:return Object.assign({},a,{rightBtnActionSheet:Object.assign({},a.rightBtnActionSheet,b.data)});case actions.SIMULATOR_SET_PAYMENT_QRWND:return Object.assign({},a,{payment:Object.assign({},a.payment,b.data)});case actions.SIMULATOR_SET_LOCATION:return Object.assign({},a,{location:Object.assign({},a.location,b.data)});case actions.SIMULATOR_SET_ACCELEROMETER:return Object.assign({},a,{accelerometer:b.data.accelerometer});case actions.SIMULATOR_SET_COMPASS:return Object.assign({},a,{compass:b.data.compass});case actions.SIMULATOR_SET_BACKGROUND_AUDIO:return Object.assign({},a,{music:Object.assign({},a.music,b.data)});case actions.SIMULATOR_SET_BACKGROUND:return Object.assign({},a,{scene:b.data.scene||a.scene,backgroundShow:b.data.show});case actions.SIMULATOR_TOGGLE_BACKGROUND:return Object.assign({},a,{backgroundShow:!a.backgroundShow});case actions.SIMULATOR_SET_WIDGET:return Object.assign({},a,{widget:Object.assign({},a.widget,b.data)});case actions.SIMULATOR_SET_GAME:return Object.assign({},a,{game:Object.assign({},a.game,b.data)});case actions.SIMULATOR_GAME_LAUNCH:{networkResponseCache.clean();const c=b.appConfig||{},d=webviewCounter++,e=getInitialState();return Object.assign({},e,{game:a.game,compileCommand:a.compileCommand,currentWebviewID:d,webviewInfos:{[d]:{shareDataURI:'',shareBtnState:{show:!1,isDynamic:!1,withShareTicket:!1},navigationBar:{showRightBtn:!0},parent:-1}},appConfig:c,orientation:{value:c.deviceOrientation||'portrait'},simulateUpdate:a.simulateUpdate,appLaunchInfo:b.data.appLaunchInfo,restartTimes:a.restartTimes+1})}case actions.SIMULATOR_SET_WXMLINSPECT:return Object.assign({},a,{wxmlInspected:b.data});case actions.SIMULATOR_SET_VIBRATE:return Object.assign({},a,{vibrate:{ts:Date.now(),type:b.data.type}});case actions.PROJECT_OPEN_TEMP_PROJECT:case actions.PROJECT_OPEN_PROJECT:return getInitialState();case actions.SIMULATOR_INSERT_HTMLWEBVIEW:{const c=b.data.webviewID,d=a.webviewInfos[c];return Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[c]:Object.assign({},a.webviewInfos[c],{htmlwebviewInfo:Object.assign({},b.data)})})})}case actions.SIMULATOR_UPDATE_HTMLWEBVIEW:{const c=b.data.webviewID,d=a.webviewInfos[c];return d?Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[c]:Object.assign({},a.webviewInfos[c],{htmlwebviewInfo:Object.assign({},d.htmlwebviewInfo,b.data)})})}):a.anyHtmlWebviewInfo&&a.anyHtmlWebviewInfo.webviewID===c?Object.assign({},a,{anyHtmlWebviewInfo:Object.assign({},a.anyHtmlWebviewInfo,b.data)}):a}case actions.SIMULATOR_REMOVE_HTMLWEBVIEW:{const c=b.data.webviewID,d=a.webviewInfos[c];return delete d.htmlwebviewInfo,Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[c]:Object.assign({},d)})})}case actions.SIMULATOR_SET_ANY_HTMLWEBVIEW:return b.data?Object.assign({},a,{anyHtmlWebviewInfo:Object.assign({},a.anyHtmlWebviewInfo,b.data)}):Object.assign({},a,{anyHtmlWebviewInfo:{}});case actions.SIMULATOR_UPDATE_DECRYPTED_INFO:return Object.assign({},a,{decryptedInfo:Object.assign({},a.decryptedInfo,{[b.api]:b.data})});case actions.SIMULATOR_CAPTURE_SCREEN:return Object.assign({},a,{captureScreen:{callbackID:b.data.callbackID,webviewID:a.currentWebviewID}});case actions.SIMULATOR_SET_ORIENTATION:return Object.assign({},a,{orientation:Object.assign({},b.data)});case actions.SIMULATOR_SET_KEYBOARD:return b.data.show?Object.assign({},a,{keyboard:Object.assign({},a.keyboard,b.data)}):Object.assign({},a,{keyboard:{show:!1}});case actions.SIMULATOR_UPDATE_KEYBOARD:return a.keyboard&&a.keyboard.show?Object.assign({},a,{keyboard:Object.assign({},a.keyboard,{update:{value:b.data.value}})}):a;case actions.SIMULATOR_INSERT_NATIVEVIEW:{const c=a.coverViewTree;let d=c[b.parentId];return d||(d=c[0]),d&&d.sons.push(b.id+''),Object.assign({},a,{coverViewTree:Object.assign({},c,{[b.id]:{type:'native',sons:[],action:'insert',id:b.id,parentId:d.id,name:b.name,api:b.api,args:b.args,callbackID:b.callbackID,position:b.position,data:b.data},[b.parentId]:d})})}case actions.SIMULATOR_UPDATE_NATIVEVIEW:{let c=a.coverViewTree[b.id];return c=Object.assign({},c,{action:'update',id:b.id,name:b.name,api:b.api,callbackID:b.callbackID,data:b.data}),b.position&&(c.position=b.position),Object.assign({},a,{coverViewTree:Object.assign({},a.coverViewTree,{[b.id]:Object.assign({},c)})})}case actions.SIMULATOR_REMOVE_NATIVEVIEW:{const c=Object.assign({},a.coverViewTree),d=c[b.id];delete c[b.id];const e=c[d.parentId];return e.sons=e.sons.filter((a)=>{return a!==b.id+''}),Object.assign({},a,{coverViewTree:Object.assign({},c)})}case actions.SIMULATOR_OPERATE_NATIVEVIEW:return Object.assign({},a,{operateNativeView:{action:'operate',id:b.id,name:b.name,api:b.api,callbackID:b.callbackID,data:b.data}});case actions.SIMULATOR_SET_MENU:return Object.assign({},a,{menu:Object.assign({},a.menu,b.data)});case actions.SIMULATOR_SET_TABBAR:{const c=Object.assign({},a.tabbar,{list:[...a.tabbar.list]}),{api:d,args:e}=b.data;return'setTabBarBadge'===d?c.list[e.index]=Object.assign({},c.list[e.index],{badge:{type:e.type,text:e.badgeValue,backgroundColor:e.badgeColor}}):'showTabBar'===d||'hideTabBar'===d?(c.show='showTabBar'===d,c.animation=!!e.animation):'setTabBarItem'===d?['text','iconPath','selectedIconPath'].forEach((a)=>{e[a]&&(c.list[e.index][a]=e[a])}):'setTabBarStyle'===d&&['color','selectedColor','backgroundColor','borderStyle'].forEach((a)=>{e[a]&&(c[a]=e[a])}),Object.assign({},a,{tabbar:c})}case actions.SIMULATOR_SET_STATUSBAR_STYLE:return Object.assign({},a,{statusbar:Object.assign({},a.statusbar,b.data)});case actions.SIMULATOR_CALL_INTERFACE:return Object.assign({},a,{interfaceCallbackInfo:{callbackID:b.callbackID,method:b.method,data:b.data}});case actions.SIMULATOR_DEBUG_INFO:return Object.assign({},a,{debugInfo:Object.assign({custom:!0},b.data)});case actions.SIMUALTOR_INSERT_COVERVIEW:{const c=b.data,d=Object.assign({},a.coverViewTree[c.parentId]);return d.sons.push(c.viewId+''),Object.assign({},a,{coverViewTree:Object.assign({},a.coverViewTree,{[c.parentId]:d,[c.viewId]:Object.assign({},b.data,{sons:[]})})})}case actions.SIMULATOR_UPDATE_COVERVIEW:{const c=b.data,d=a.coverViewTree[c.viewId];return Object.assign({},a,{coverViewTree:Object.assign({},a.coverViewTree,{[c.viewId]:Object.assign({},d,b.data)})})}case actions.SIMULATOR_ANIMATE_COVERVIEW:{const c=b.data,d=a.coverViewTree[c.viewId];return d.animation=b.data.animation,Object.assign({},a,{coverViewTree:Object.assign({},a.coverViewTree,{[c.viewId]:Object.assign({},d)})})}case actions.SIMULATOR_REMOVE_COVERVIEW:{const c=b.data,d=Object.assign({},a.coverViewTree),e=d[c.viewId],f=Object.assign({},d[e.parentId]);return f.sons=f.sons.filter((a)=>{return a!==c.viewId+''}),delete d[c.viewId],Object.assign({},a,{coverViewTree:Object.assign({},d)})}case actions.SIMULATOR_PAGENOTFOUND_CALLBACK:{const b=a.currentWebviewID,c=a.webviewInfos[b];if(c.pageNotFound)return Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[b]:Object.assign({},c,{forceLoad:!0})})});const d={};for(const b in a.webviewInfos)a.webviewInfos[b].pageNotFound||(d[b]=a.webviewInfos[b]);return Object.assign({},a,{webviewInfos:d})}case actions.SIMULATOR_SET_WEBVIEW_PAGE_ORIENTATION:{const c=a.currentWebviewID,d=a.webviewInfos[c],e=b.data.orientation||DEFAULT_ORIENTATION,f=b.data.isPrivate,g=Object.assign({},d.pageOrientation,{lastPageOrientation:e});return f?g.private_setPageOrientation=e:g.setPageOrientation=e,Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[c]:Object.assign({},d,{pageOrientation:g})})})}case actions.SIMULATOR_HIDE_STATUSBAR:{const c=a.webviewInfos[a.currentWebviewID],{statusBarHeight:d=0}=b.data;if(!c)return a;return c.showStatusBar&&(c.showStatusBar=!1,c.htmlwebviewInfo&&(c.htmlwebviewInfo.position.height+=d)),Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[a.currentWebviewID]:c})})}case actions.SIMULATOR_SHOW_STATUSBAR:{const c=a.webviewInfos[a.currentWebviewID],{statusBarHeight:d=0}=b.data;if(!c)return a;return c.showStatusBar||(c.showStatusBar=!0,c.htmlwebviewInfo&&(c.htmlwebviewInfo.position.height-=d)),Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[a.currentWebviewID]:c})})}case actions.SIMULATOR_HIDE_NAVIGATION:{const c=a.webviewInfos[a.currentWebviewID],{navigationBarHeight:d=0}=b.data;if(!c)return a;return c.showNavigationBar&&(c.showNavigationBar=!1,c.htmlwebviewInfo&&(c.htmlwebviewInfo.position.height+=d)),Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[a.currentWebviewID]:c})})}case actions.SIMULATOR_SHOW_NAVIGATION:{const c=a.webviewInfos[a.currentWebviewID],{navigationBarHeight:d=0}=b.data;if(!c)return a;return c.showNavigationBar||(c.showNavigationBar=!0,c.htmlwebviewInfo&&(c.htmlwebviewInfo.position.height-=d)),Object.assign({},a,{webviewInfos:Object.assign({},a.webviewInfos,{[a.currentWebviewID]:c})})}case REHYDRATE:return _.merge(_.cloneDeep(a),b.payload.simulator||{});default:return a;}}module.exports=simulator;
;}(require("lazyload"), require);
